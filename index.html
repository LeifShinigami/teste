<!-- ...restante código acima... -->

<!-- Iframe de conteúdo -->
<div id="frame-wrapper">
  <iframe id="framer-frame"
          allow="autoplay; fullscreen"
          scrolling="yes"></iframe>
</div>

<!-- Botão "Instalar App" fora do iframe -->
<button id="installButton">Instalar App</button>

<script>
  const PASS = "xxx"; // tua password

  function isInApp() {
    return (
      window.matchMedia('(display-mode: standalone)').matches ||
      window.navigator.standalone === true
    );
  }

  function isInSocialWebview() {
    const ua = navigator.userAgent || navigator.vendor || window.opera;
    return /\bwv\b|\bWebView\b/i.test(ua) ||
      (!window.matchMedia('(display-mode: standalone)').matches &&
       !window.navigator.standalone &&
       typeof window.opener === "undefined" &&
       /Instagram|FBAV|FBAN|Messenger|Line|Snapchat|TikTok|Telegram|Pinterest/i.test(ua));
  }

  function check() {
    const input = document.getElementById("pw").value;
    if (input === PASS) {
      let targetUrl = "";
      if (isInSocialWebview()) {
        targetUrl = "https://curly-path-662902.framer.app/start2";
      } else if (isInApp()) {
        targetUrl = "https://curly-path-662902.framer.app/capa";
      } else {
        targetUrl = "https://curly-path-662902.framer.app/assetspre";
      }
      document.getElementById("login").style.display = "none";
      const iframe = document.getElementById("framer-frame");
      iframe.src = targetUrl;
      document.getElementById("frame-wrapper").style.display = "block";
      window.scrollTo(0, 0);
    } else {
      alert("Errado. Vai dormir.");
    }
  }

  // Instalação PWA
  let deferredPrompt = null;
  window.addEventListener("beforeinstallprompt", (e) => {
    e.preventDefault();
    deferredPrompt = e;
    console.log("✅ PWA pronta para instalar");

    const btn = document.getElementById("installButton");
    if (btn) {
      btn.style.display = "block";
      btn.onclick = () => {
        deferredPrompt.prompt();
        deferredPrompt.userChoice.then(() => {
          deferredPrompt = null;
          btn.style.display = "none";
        });
      };
    }
  });

  if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("/service-worker.js")
      .then(() => console.log("✅ SW registado"))
      .catch(err => console.error("❌ SW erro:", err));
  }
</script>

<style>
  #installButton {
    position: fixed;
    bottom: 20px;
    left: 50%;
    transform: translateX(-50%);
    padding: 12px 20px;
    background: cyan;
    color: black;
    font-weight: bold;
    border: none;
    cursor: pointer;
    display: none;
    z-index: 9999;
  }
</style>

</body>
</html>
